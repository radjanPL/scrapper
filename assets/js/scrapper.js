function e(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}!function(){const e={NODE_ENV:"production",BASE_URI:""};try{if(process)return process.env=Object.assign({},process.env),void Object.assign(process.env,e)}catch(e){}globalThis.process={env:e}}();var t=["onmount","onremount","onunmount"],n="undefined"!=typeof window&&"ShadowRoot"in window;function r(r,o,s,i){var l=d(r),c=d(o);o===c&&c.__redom_view&&(o=c.__redom_view),o!==c&&(c.__redom_view=o);var p=c.__redom_mounted,f=c.parentNode;return p&&f!==l&&function(t,n,r){var o=n.__redom_lifecycle;if(e(o))n.__redom_lifecycle={};else{var s=r;for(n.__redom_mounted&&a(n,"onunmount");s;){var i=s.__redom_lifecycle||{};for(var l in o)i[l]&&(i[l]-=o[l]);e(i)&&(s.__redom_lifecycle=null),s=s.parentNode}}}(0,c,f),null!=s?i?l.replaceChild(c,d(s)):l.insertBefore(c,d(s)):l.appendChild(c),function(e,r,o,s){for(var i=r.__redom_lifecycle||(r.__redom_lifecycle={}),l=o===s,c=!1,p=0,d=t;p<d.length;p+=1){var f=d[p];l||e!==r&&f in e&&(i[f]=(i[f]||0)+1),i[f]&&(c=!0)}if(!c)return void(r.__redom_lifecycle={});var u=o,m=!1;(l||u&&u.__redom_mounted)&&(a(r,l?"onremount":"onmount"),m=!0);for(;u;){var h=u.parentNode,_=u.__redom_lifecycle||(u.__redom_lifecycle={});for(var v in i)_[v]=(_[v]||0)+i[v];if(m)break;(u.nodeType===Node.DOCUMENT_NODE||n&&u instanceof ShadowRoot||h&&h.__redom_mounted)&&(a(u,l?"onremount":"onmount"),m=!0),u=h}}(o,c,l,f),o}function a(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var r=e.__redom_view,o=0;for(var s in r&&r[t]&&r[t](),n)s&&o++;if(o)for(var i=e.firstChild;i;){var l=i.nextSibling;a(i,t),i=l}}}function o(e,t,n){e.style[t]=null==n?"":n}var s="http://www.w3.org/1999/xlink";function i(e,t,n,r){var a=d(e);if("object"==typeof t)for(var s in t)i(a,s,t[s],r);else{var p=a instanceof SVGElement,f="function"==typeof n;if("style"===t&&"object"==typeof n)!function(e,t,n){var r=d(e);if("object"==typeof t)for(var a in t)o(r,a,t[a]);else o(r,t,n)}(a,n);else if(p&&f)a[t]=n;else if("dataset"===t)c(a,n);else if(p||!(t in a)&&!f||"list"===t){if(p&&"xlink"===t)return void l(a,n);r&&"class"===t&&(n=a.className+" "+n),null==n?a.removeAttribute(t):a.setAttribute(t,n)}else a[t]=n}}function l(e,t,n){if("object"==typeof t)for(var r in t)l(e,r,t[r]);else null!=n?e.setAttributeNS(s,t,n):e.removeAttributeNS(s,t,n)}function c(e,t,n){if("object"==typeof t)for(var r in t)c(e,r,t[r]);else null!=n?e.dataset[t]=n:delete e.dataset[t]}function p(e,t,n){for(var a=0,o=t;a<o.length;a+=1){var s=o[a];if(0===s||s){var l=typeof s;"function"===l?s(e):"string"===l||"number"===l?e.appendChild((c=s,document.createTextNode(null!=c?c:""))):f(d(s))?r(e,s):s.length?p(e,s,n):"object"===l&&i(e,s,null,n)}}var c}function d(e){return e.nodeType&&e||!e.el&&e||d(e.el)}function f(e){return e&&e.nodeType}var u={};function m(e){for(var t,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var a=typeof e;if("string"===a)t=_(e).cloneNode(!1);else if(f(e))t=e.cloneNode(!1);else{if("function"!==a)throw new Error("At least one argument required");var o=e;t=new(Function.prototype.bind.apply(o,[null].concat(n)))}return p(d(t),n,!0),t}var h=m;function _(e){return u[e]||(u[e]=function(e,t){var n=function(e){for(var t=e.split(/([#.])/),n="",r="",a=[],o=0;o<t.length;o++){var s=t[o];"#"===s?r=t[++o]:"."===s?a.push(t[++o]):s.length&&(n=s)}return{tag:n||"div",id:r,className:a.join(" ")}}(e),r=n.tag,a=n.id,o=n.className,s=t?document.createElementNS(t,r):document.createElement(r);return a&&(s.id=a),o&&(t?s.setAttribute("class",o):s.className=o),s}(e))}m.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=_(e);return m.bind.apply(m,[this,r].concat(t))};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.container-scrapper-wrapper {\n  font-size: 16px;\n}\n.container-scrapper-wrapper .start-scrapper {\n  background-color: #e12a27;\n  border: 1px solid #e12a27;\n  font-weight: normal;\n  line-height: 1;\n  padding: 9px 20px;\n  position: relative;\n  text-transform: uppercase;\n}\n.container-scrapper-wrapper .start-scrapper:hover {\n  cursor: pointer;\n}\n.container-scrapper-wrapper .start-scrapper:active {\n  background-color: #ce1110;\n}\n.container-scrapper-wrapper .start-scrapper__text {\n  color: #ffffff;\n  transition: all 0.2s;\n}\n.container-scrapper-wrapper .start-scrapper__text::after {\n  content: "Run Scrapper";\n}\n.container-scrapper-wrapper .start-scrapper__spinner {\n  padding: 9px 20px;\n}\n.container-scrapper-wrapper .start-scrapper__spinner::after {\n  content: "";\n  height: 16px;\n  position: absolute;\n  width: 16px;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  border: 4px solid transparent;\n  border-top-color: #ffffff;\n  border-radius: 50%;\n  animation: animation-spinner 1s ease infinite;\n}\n@keyframes animation-spinner {\n  from {\n    transform: rotate(0turn);\n  }\n  to {\n    transform: rotate(1turn);\n  }\n}');const v=async(e,t)=>{const n=g();return(await fetch(`${n}${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":scrapperSettings.nonce},body:JSON.stringify({params:t})})).json()},g=()=>window.location.pathname.replace("wp-admin/admin.php","")+"wp-json/scrapper/v1/main/";class y{constructor(){this.el=h("button",{className:"start-scrapper"},h("div",{className:"start-scrapper__text"}))}}const w=e=>{const t=/<main .*?>([\s\S]*)<\/main>/.exec(e);if(null!=t&&null!==t[1]&&void 0!==t[1]&&t[1].length>0){const e=b(t[1]),n=e.getElementsByTagName("script");let r=n.length;for(;r--;)n[r].parentNode.removeChild(n[r]);const a=e.getElementsByTagName("iframe");let o=a.length;for(;o--;)a[o].parentNode.removeChild(a[o]);const s=e.getElementsByTagName("img");let i=s.length;for(;i--;)s[i].parentNode.removeChild(s[i]);return e?.firstElementChild?.firstElementChild?.classList.contains("entry-header")&&e.firstElementChild.removeChild(e.firstElementChild.firstElementChild),e?.firstElementChild?.firstElementChild?.lastElementChild?.classList.contains("b-share-calltoaction")&&e.firstElementChild.firstElementChild.removeChild(e.firstElementChild.firstElementChild.lastElementChild),e.outerHTML}return null},b=e=>(new DOMParser).parseFromString(e,"text/html").body.childNodes[0];class N{constructor(){this.states={}}setState=(e,t)=>this.states[e]=t;getAllStates=()=>this.states;getGurrentState=e=>null!==this.states[e]&&void 0!==this.states[e]?this.states[e]:null}class C{constructor(){this.handleScrapperBlog=this.handleScrapperBlog.bind(this),this.el=new y({})}update=()=>{this.el.el.addEventListener("click",this.handleScrapperBlog)};handleScrapperBlog=async()=>{let e,t=0;this.handleSetButtonSpinner();const n=new N;await this.handleGetAllNamePage().then((r=>{if(e=r.length,0===r.length||null===r)return this.handleSetButtonText(),!0;r.map((r=>{(async e=>{const t=await fetch(`${process.env.BASE_URI}${e}`,{method:"GET",mode:"cors"}),n=await t.text();return w(n)})(r.page_name+"/").then((e=>{null!==e&&n.setState(r.id,e)})).then((()=>{if(t++,e===t){(async e=>v("setAllPages",e))(n.getAllStates()).then((e=>{!0!==e.success&&console.log("scrapper code is not working"),this.handleSetButtonText()}))}}))}))}))};handleGetAllNamePage=async()=>{const e=[],t=document.getElementsByClassName("checkbox-page");for(let n=0;n<t.length;n++){let r=t[n];r.checked&&e.push({id:r.dataset.id,page_name:r.dataset.url})}return e};handleSetButtonSpinner=()=>(this.el.el.toggleAttribute("disabled",!0),this.el.el.lastChild.classList.remove("start-scrapper__text"),this.el.el.lastChild.classList.add("start-scrapper__spinner"));handleSetButtonText=()=>(this.el.el.toggleAttribute("disabled",!1),this.el.el.lastChild.classList.remove("start-scrapper__spinner"),this.el.el.lastChild.classList.add("start-scrapper__text"))}class E{constructor(){this.scrapperWrapper=new C({}),this.el=h("div",{className:"container-scrapper-wrapper"},this.scrapperWrapper),this.scrapperWrapper.update()}}window.addEventListener("load",(()=>{const e=document.getElementById("container-scrapper");null!=e?r(e,new E({})):console.log("#container-scrapper is not found")}));
